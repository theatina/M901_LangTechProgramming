Προγραμματισμός II
Παράδειγμα: Πίνακες δομών
Πίνακας δομής: struct addressT addr[10];
Η απόδοση αρχικής τιμής στη δομή ακολουθεί το γενικό κανόνα αρχικοποίησης.
Έτσι, για την αρχικοποίηση των τριών πρώτων στοιχείων του πίνακα addr έχουμε την ακόλουθη δήλωση αρχικοποίησης:
Για την αναφορά στα μέλη των στοιχείων του πίνακα ακολουθείται η προφανής σύνταξη.
Έτσι, η έκφραση
addr[0].name όνομα της πρώτης διεύθυνσης
addr[1].city πόλη της δεύτερης διεύθυνσης
Στη C απαιτείται να συμπεριληφθεί στον ορισμό δομής η δεσμευμένη λέξη struct, π.χ. struct addressT addr[10]. Στη C++ η δεσμευμένη λέξη δεν είναι απαραίτητη, π.χ. addressT addr[10], όπως ακριβώς ορίζεται ένας ακέραιος, π.χ. int var1.
Προσοχή: Αν ορίζαμε μία δομή χωρίς τον τίτλο του προσδιοριστή της, δηλαδή αντί να ορίσουμε
oρίζαμε
Θα προέκυπτε η μεταβλητή rect1 του συγκεκριμένου τύπου αλλά ο τύπος δε θα μπορούσε να ξαναχρησιμοποιηθεί γιατί δε θα είχε όνομα.
Σε περίπτωση εκ νέου χρησιμοποίησης δομής της μορφής τής rect1, θα έπρεπε να θέσουμε εκ νέου:
Απουσιάζει ο προσδιοριστής rectangleT
Παράδειγμα: Ένθεση δομών και πίνακες δομών
} // τέλος της main
Σχολιασμός πηγαίου κώδικα:
Δήλωση του τύπου δεδομένων δομής addressT.
Η νέα δομή περιλαμβάνει τα μέλη name, street, number, zip και city.
Δηλώνεται η μεταβλητή τύπου δομής addressT με όνομα addr1 και αποδίδονται αρχικές τιμές στα μέλη της.
Δηλώνεται ένας πίνακας με όνομα addr, ο οποίος έχει 10 στοιχεία τύπου δομής addressT, και αρχικοποιούνται τα δύο πρώτα στοιχεία του πίνακα.
Δηλώνεται ο τύπος δεδομένων δομής dayT με μέλη date, month, year.
Δηλώνεται ο τύπος δεδομένων personT με μέλη addr και birthday, τα οποία είναι και αυτά δομές τύπων addressT και dayT, αντίστοιχα.
Δηλώνεται η μεταβλητή p ως τύπου δομής personT και αποδίδονται αρχικές τιμές στα μέλη της.
Θα πρέπει να προσεχθεί πως οι αρχικοποιήσεις κάθε μέλους της δομής περικλείονται σε άγκιστρα.
Προσέξτε την αναφορά στα μέλη ένθετων δομών.
Χρησιμοποιείται ο τελεστής dot (.) χωρίς περιορισμό στο βάθος έκθεσης.
Κλήση της printf για εκτύπωση του πρώτου και δεύτερου στοιχείου του πίνακα addr.
Κλήση της printf για εκτύπωση του πρώτου χαρακτήρα του μέλους name του δεύτερου στοιχείου του πίνακα addr.
Παράδειγμα:
1) Να δημιουργηθεί ο πίνακας directory[40], ο οποίος θα αντιστοιχεί σε προσωπική ατζέντα.
Κάθε στοιχείο του directory θα αποτελεί μεταβλητή τύπου δομής personT, η οποία θα έχει μέλη:
i) Δομή idT με: α) το ονοματεπώνυμο και β) δομή addressT με τη διεύθυνση του καταγεγραμμένου.
ii) Δομή teleT με τα τηλέφωνα (σταθερό, κινητό) και fax του καταγεγραμμένου.
iii) Δομή emT με το προσωπικό email και αυτό της εργασίας του καταγεγραμμένου.
2) Nα γραφεί η main, μέσα στην οποία θα γίνεται ανάγνωση και εκτύπωση δύο στοιχείων του directory.
Σύμφωνα με την υπόθεση ο τύπος personΤ περιλαμβάνει
ως μέλη μεταβλητές που είναι αποκλειστικά τύπου δομής.
Επιπρόσθετα ο τύπος idT περιλαμβάνει ένα μέλος που είναι τύπου δομής (addressT). Κατά συνέπεια, η δήλωση των τύπων δεδομένων θα πρέπει να γίνει με την ακόλουθη σειρά:
struct idT { Ή struct teleT { Ή struct emT {
Λύση:
Εφόσον δεν προσδιορίζονται επακριβώς τα περιεχόμενα του τύπου addressT, αυτά επιλέγονται κατά το δοκούν:
Είναι προτιμητέο οι τηλεφωνικοί αριθμοί να δηλώνονται ως αλφαριθμητικά γιατί αποτελούν 10-ψήφιους ή 14-ψήφιους ακέραιους.
Κατά συνέπεια ο τύπος teleT μπορεί να έχει τη μορφή:
char wr_no[ ]; // σταθερό τηλέφωνο
char cell_no[ ]; // κινητό τηλέφωνο
Συνολικά ο κώδικας είναι ο ακόλουθος:
} // τέλος της for
Αποτελέσματα:
